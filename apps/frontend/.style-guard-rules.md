# 🔒 CSS Style Guard Rules

## 📋 Overview

The CSS Style Guard system protects the core design system from unauthorized modifications while allowing safe customization and extension.

## 🛡️ Protected Elements

### 🎨 Core Theme Variables (LOCKED)
```css
/* ❌ DO NOT MODIFY */
:root {
  --background: #f3f3f3;
  --foreground: #575860;
  --border: #e2e8f0;
  --ring: #f28362;
  /* ... other core variables */
}
```

### 🎯 Color System (LOCKED)
```css
/* ❌ DO NOT MODIFY */
--color-primary-500: #f28362;
--color-secondary-500: #d89967;
--color-text-800: #575860;
/* ... all color variables */
```

### 🔘 Core Components (LOCKED)
```css
/* ❌ DO NOT MODIFY */
.primary-button { /* ... */ }
.secondary-button { /* ... */ }
.gradient-text { /* ... */ }
.bg-gradient { /* ... */ }
```

### 📱 Mobile Navigation (LOCKED)
```css
/* ❌ DO NOT MODIFY */
.mobile-nav-overlay { /* ... */ }
.mobile-nav-sidebar { /* ... */ }
.mobile-nav-item { /* ... */ }
```

## ✅ Safe Modification Areas

### 🆕 Custom Styles
```css
/* ✅ SAFE TO ADD */
/* Use: src/styles/custom-styles.css */

.my-new-component {
  @apply bg-white rounded-xl shadow-sm;
}

.admin-dashboard-card {
  /* New styles for admin flow */
}
```

### 🧩 Component Modules
```css
/* ✅ SAFE TO CREATE */
/* Use: src/components/MyComponent/MyComponent.module.css */

.container {
  /* Component-specific styles */
}

.header {
  /* Scoped to this component */
}
```

### 🎨 Theme Extensions
```css
/* ✅ SAFE TO ADD */
/* Use: src/styles/themes/custom-theme.css */

:root {
  /* Add new custom properties */
  --my-custom-color: #123456;
  --my-spacing: 1.5rem;
}
```

## 📝 Modification Guidelines

### ✅ Allowed Changes
- ✅ Adding new CSS classes
- ✅ Creating component-specific styles
- ✅ Adding utility classes
- ✅ Creating new animations
- ✅ Adding responsive breakpoints
- ✅ Extending the color palette (new colors)
- ✅ Adding new font weights/sizes

### ❌ Prohibited Changes
- ❌ Modifying core color variables
- ❌ Changing primary/secondary button styles
- ❌ Altering mobile navigation structure
- ❌ Modifying container widths
- ❌ Changing core animations
- ❌ Altering z-index hierarchy
- ❌ Modifying font family

### ⚠️ Requires Approval
- ⚠️ Adding new core theme variables
- ⚠️ Modifying existing component styles
- ⚠️ Changing responsive breakpoints
- ⚠️ Adding global utility classes
- ⚠️ Modifying accessibility styles

## 🛠️ How to Add New Styles

### 1. For New Components
```css
/* Create: src/components/AdminDashboard/AdminDashboard.module.css */
.dashboard {
  @apply grid grid-cols-1 lg:grid-cols-3 gap-6;
}

.card {
  @apply bg-white rounded-2xl shadow-sm p-6;
}
```

### 2. For Global Utilities
```css
/* Add to: src/styles/custom-styles.css */
.admin-button {
  @apply bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg;
}

.visitor-card {
  @apply bg-white rounded-xl shadow-sm border border-gray-200 p-4;
}
```

### 3. For Theme Extensions
```css
/* Add to: src/styles/custom-styles.css */
:root {
  /* New custom properties */
  --admin-primary: #1e40af;
  --visitor-accent: #7c3aed;
  --report-success: #059669;
}
```

## 🔍 Style Guard Commands

### Initialize Protection
```bash
npm run style-guard:init
```

### Check for Violations
```bash
npm run style-guard:check
```

### Generate Report
```bash
npm run style-guard:report
```

## 🚨 Violation Examples

### ❌ Bad: Modifying Protected Styles
```css
/* This will trigger a violation */
.primary-button {
  background: red !important; /* ❌ DON'T DO THIS */
}

:root {
  --color-primary-500: #ff0000; /* ❌ DON'T DO THIS */
}
```

### ✅ Good: Creating New Styles
```css
/* This is safe and encouraged */
.my-custom-button {
  @apply bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg;
}

.admin-primary-button {
  @apply primary-button; /* Extend existing */
  /* Add custom properties */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}
```

## 📊 Monitoring and Reporting

### Automated Checks
- ✅ Pre-commit hooks check for violations
- ✅ Build process validates styles
- ✅ CI/CD pipeline enforces rules
- ✅ Regular audits generate reports

### Violation Types
1. **UNAUTHORIZED_MODIFICATION** - Protected file was changed
2. **PROTECTED_SELECTOR_USAGE** - Used protected CSS selector
3. **CRITICAL_PROPERTY_CHANGE** - Modified critical CSS property
4. **MISSING_APPROVAL** - Change requires team approval

## 🔧 Troubleshooting

### Common Issues

#### "Protected selector usage" Error
```bash
# Problem: Used .primary-button in custom CSS
# Solution: Create a new class that extends it
.my-button {
  @apply primary-button;
  /* Add your customizations */
}
```

#### "File checksum mismatch" Error
```bash
# Problem: Protected file was modified
# Solution: Revert changes or get approval
git checkout -- src/app/globals.css
```

#### "Critical property change" Warning
```bash
# Problem: Changed a critical CSS property
# Solution: Use custom properties or new classes
:root {
  --my-custom-color: #123456; /* ✅ Good */
}
```

## 📞 Getting Approval

### When You Need Approval
- Modifying core design tokens
- Changing component behavior
- Adding global utilities
- Modifying responsive breakpoints

### How to Request Approval
1. Create a GitHub issue with the "style-change" label
2. Describe the change and rationale
3. Provide before/after examples
4. Wait for team review and approval
5. Document the approved change

### Approval Template
```markdown
## Style Change Request

**Type**: [Core Theme / Component / Global Utility]
**Impact**: [Low / Medium / High]
**Reason**: [Brief description]

**Current Style**:
```css
/* Current implementation */
```

**Proposed Change**:
```css
/* Proposed implementation */
```

**Testing**: [How will this be tested?]
**Rollback Plan**: [How to revert if needed?]
```

## 📚 Best Practices

### 1. Naming Conventions
```css
/* Use descriptive, specific names */
.admin-dashboard-card { /* ✅ Good */ }
.card { /* ❌ Too generic */ }

/* Use BEM methodology for complex components */
.visitor-schedule__item--active { /* ✅ Good */ }
```

### 2. Responsive Design
```css
/* Mobile-first approach */
.my-component {
  @apply w-full; /* Mobile default */
}

@media (min-width: 768px) {
  .my-component {
    @apply w-1/2; /* Tablet and up */
  }
}
```

### 3. Performance
```css
/* Avoid expensive properties */
.my-animation {
  /* ✅ Good - GPU accelerated */
  transform: translateX(100%);
  
  /* ❌ Avoid - causes reflow */
  left: 100px;
}
```

### 4. Accessibility
```css
/* Ensure sufficient contrast */
.my-text {
  color: #374151; /* ✅ Good contrast */
}

/* Provide focus states */
.my-button:focus-visible {
  @apply ring-2 ring-blue-500;
}
```

## 🎯 Summary

The CSS Style Guard ensures:
- ✅ Design consistency across the application
- ✅ Safe areas for customization and extension
- ✅ Automated protection against breaking changes
- ✅ Clear guidelines for developers
- ✅ Approval process for critical changes

**Remember**: When in doubt, create new styles rather than modifying existing ones!