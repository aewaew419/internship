# ğŸ”’ CSS Style Guard Rules

## ğŸ“‹ Overview

The CSS Style Guard system protects the core design system from unauthorized modifications while allowing safe customization and extension.

## ğŸ›¡ï¸ Protected Elements

### ğŸ¨ Core Theme Variables (LOCKED)
```css
/* âŒ DO NOT MODIFY */
:root {
  --background: #f3f3f3;
  --foreground: #575860;
  --border: #e2e8f0;
  --ring: #f28362;
  /* ... other core variables */
}
```

### ğŸ¯ Color System (LOCKED)
```css
/* âŒ DO NOT MODIFY */
--color-primary-500: #f28362;
--color-secondary-500: #d89967;
--color-text-800: #575860;
/* ... all color variables */
```

### ğŸ”˜ Core Components (LOCKED)
```css
/* âŒ DO NOT MODIFY */
.primary-button { /* ... */ }
.secondary-button { /* ... */ }
.gradient-text { /* ... */ }
.bg-gradient { /* ... */ }
```

### ğŸ“± Mobile Navigation (LOCKED)
```css
/* âŒ DO NOT MODIFY */
.mobile-nav-overlay { /* ... */ }
.mobile-nav-sidebar { /* ... */ }
.mobile-nav-item { /* ... */ }
```

## âœ… Safe Modification Areas

### ğŸ†• Custom Styles
```css
/* âœ… SAFE TO ADD */
/* Use: src/styles/custom-styles.css */

.my-new-component {
  @apply bg-white rounded-xl shadow-sm;
}

.admin-dashboard-card {
  /* New styles for admin flow */
}
```

### ğŸ§© Component Modules
```css
/* âœ… SAFE TO CREATE */
/* Use: src/components/MyComponent/MyComponent.module.css */

.container {
  /* Component-specific styles */
}

.header {
  /* Scoped to this component */
}
```

### ğŸ¨ Theme Extensions
```css
/* âœ… SAFE TO ADD */
/* Use: src/styles/themes/custom-theme.css */

:root {
  /* Add new custom properties */
  --my-custom-color: #123456;
  --my-spacing: 1.5rem;
}
```

## ğŸ“ Modification Guidelines

### âœ… Allowed Changes
- âœ… Adding new CSS classes
- âœ… Creating component-specific styles
- âœ… Adding utility classes
- âœ… Creating new animations
- âœ… Adding responsive breakpoints
- âœ… Extending the color palette (new colors)
- âœ… Adding new font weights/sizes

### âŒ Prohibited Changes
- âŒ Modifying core color variables
- âŒ Changing primary/secondary button styles
- âŒ Altering mobile navigation structure
- âŒ Modifying container widths
- âŒ Changing core animations
- âŒ Altering z-index hierarchy
- âŒ Modifying font family

### âš ï¸ Requires Approval
- âš ï¸ Adding new core theme variables
- âš ï¸ Modifying existing component styles
- âš ï¸ Changing responsive breakpoints
- âš ï¸ Adding global utility classes
- âš ï¸ Modifying accessibility styles

## ğŸ› ï¸ How to Add New Styles

### 1. For New Components
```css
/* Create: src/components/AdminDashboard/AdminDashboard.module.css */
.dashboard {
  @apply grid grid-cols-1 lg:grid-cols-3 gap-6;
}

.card {
  @apply bg-white rounded-2xl shadow-sm p-6;
}
```

### 2. For Global Utilities
```css
/* Add to: src/styles/custom-styles.css */
.admin-button {
  @apply bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg;
}

.visitor-card {
  @apply bg-white rounded-xl shadow-sm border border-gray-200 p-4;
}
```

### 3. For Theme Extensions
```css
/* Add to: src/styles/custom-styles.css */
:root {
  /* New custom properties */
  --admin-primary: #1e40af;
  --visitor-accent: #7c3aed;
  --report-success: #059669;
}
```

## ğŸ” Style Guard Commands

### Initialize Protection
```bash
npm run style-guard:init
```

### Check for Violations
```bash
npm run style-guard:check
```

### Generate Report
```bash
npm run style-guard:report
```

## ğŸš¨ Violation Examples

### âŒ Bad: Modifying Protected Styles
```css
/* This will trigger a violation */
.primary-button {
  background: red !important; /* âŒ DON'T DO THIS */
}

:root {
  --color-primary-500: #ff0000; /* âŒ DON'T DO THIS */
}
```

### âœ… Good: Creating New Styles
```css
/* This is safe and encouraged */
.my-custom-button {
  @apply bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg;
}

.admin-primary-button {
  @apply primary-button; /* Extend existing */
  /* Add custom properties */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}
```

## ğŸ“Š Monitoring and Reporting

### Automated Checks
- âœ… Pre-commit hooks check for violations
- âœ… Build process validates styles
- âœ… CI/CD pipeline enforces rules
- âœ… Regular audits generate reports

### Violation Types
1. **UNAUTHORIZED_MODIFICATION** - Protected file was changed
2. **PROTECTED_SELECTOR_USAGE** - Used protected CSS selector
3. **CRITICAL_PROPERTY_CHANGE** - Modified critical CSS property
4. **MISSING_APPROVAL** - Change requires team approval

## ğŸ”§ Troubleshooting

### Common Issues

#### "Protected selector usage" Error
```bash
# Problem: Used .primary-button in custom CSS
# Solution: Create a new class that extends it
.my-button {
  @apply primary-button;
  /* Add your customizations */
}
```

#### "File checksum mismatch" Error
```bash
# Problem: Protected file was modified
# Solution: Revert changes or get approval
git checkout -- src/app/globals.css
```

#### "Critical property change" Warning
```bash
# Problem: Changed a critical CSS property
# Solution: Use custom properties or new classes
:root {
  --my-custom-color: #123456; /* âœ… Good */
}
```

## ğŸ“ Getting Approval

### When You Need Approval
- Modifying core design tokens
- Changing component behavior
- Adding global utilities
- Modifying responsive breakpoints

### How to Request Approval
1. Create a GitHub issue with the "style-change" label
2. Describe the change and rationale
3. Provide before/after examples
4. Wait for team review and approval
5. Document the approved change

### Approval Template
```markdown
## Style Change Request

**Type**: [Core Theme / Component / Global Utility]
**Impact**: [Low / Medium / High]
**Reason**: [Brief description]

**Current Style**:
```css
/* Current implementation */
```

**Proposed Change**:
```css
/* Proposed implementation */
```

**Testing**: [How will this be tested?]
**Rollback Plan**: [How to revert if needed?]
```

## ğŸ“š Best Practices

### 1. Naming Conventions
```css
/* Use descriptive, specific names */
.admin-dashboard-card { /* âœ… Good */ }
.card { /* âŒ Too generic */ }

/* Use BEM methodology for complex components */
.visitor-schedule__item--active { /* âœ… Good */ }
```

### 2. Responsive Design
```css
/* Mobile-first approach */
.my-component {
  @apply w-full; /* Mobile default */
}

@media (min-width: 768px) {
  .my-component {
    @apply w-1/2; /* Tablet and up */
  }
}
```

### 3. Performance
```css
/* Avoid expensive properties */
.my-animation {
  /* âœ… Good - GPU accelerated */
  transform: translateX(100%);
  
  /* âŒ Avoid - causes reflow */
  left: 100px;
}
```

### 4. Accessibility
```css
/* Ensure sufficient contrast */
.my-text {
  color: #374151; /* âœ… Good contrast */
}

/* Provide focus states */
.my-button:focus-visible {
  @apply ring-2 ring-blue-500;
}
```

## ğŸ¯ Summary

The CSS Style Guard ensures:
- âœ… Design consistency across the application
- âœ… Safe areas for customization and extension
- âœ… Automated protection against breaking changes
- âœ… Clear guidelines for developers
- âœ… Approval process for critical changes

**Remember**: When in doubt, create new styles rather than modifying existing ones!